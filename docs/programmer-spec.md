## Deep Research Assistant Specification

This specification outlines the implementation of a Deep Research Assistant, a system designed to perform iterative, in-depth research on any given topic. The system combines search capabilities, web scraping, and language processing to provide comprehensive research results.

## User Experience (UX)

The user interaction with the Deep Research Assistant follows these steps:

1. The user is prompted to enter their research query.
2. The user is asked to specify the research breadth 
	1. recommended range: 2-10, with a default of 4
3. The user is asked to specify the research depth 
	1. recommended range: 1-5, with a default of 2
4. The system generates follow-up questions to refine the research direction.
5. The user answers these follow-up questions.
6. The system then conducts the research based on the provided information.
7. Upon completion, the system presents a summary of findings and saves a detailed report to a file.

## Internal Research Loop

The core functionality of the Deep Research Assistant can be broken down into several key components:

### 1. Query Generation

- Input: User's initial query, previous learnings (if any)
- Output: A list of search queries
- Functionality: Generate relevant search queries based on the input, ensuring each query is unique and targets a specific aspect of the research topic.

### 2. Query Research

- Input: Generated search queries
- Output: Path to a markdown file
- Functionality: Execute research requests via `llm` CLI tool and write the result to a local markdown file generated by taking the first line of the file and generating a slug from it.

### 3. Research Processing

- Input: Paths to markdown files
- Output: Extracted learnings and follow-up questions
- Functionality: Analyze the retrieved content to extract key learnings and generate relevant follow-up questions for further research.

### 4. Recursive Exploration

- Input: Current depth, breadth, learnings, and follow-up questions
- Output: Updated learnings 
- Functionality: If the current depth is greater than 0, initiate a new research cycle using the follow-up questions as new queries. Decrease depth by 1 and adjust breadth for each new cycle.

### 5. Report Generation

- Input: All accumulated learnings
- Output: A comprehensive research report
- Functionality: Compile all findings into a well-structured report, including all sources and references.

## Key Components

8. **Text Splitter**: A utility to split large texts into smaller, manageable chunks while preserving context.

9. **Language Model Interface**: An interface to interact with a language model for tasks such as query generation, content analysis, and report writing.

10. **Search Engine Interface**: An interface to perform web searches and retrieve results.

11. **Concurrency Manager**: A utility to manage concurrent operations, particularly useful for parallel processing of search results.

12. **Feedback Generator**: A component to generate follow-up questions based on the initial query and research progress.

## Data Flow

13. User input → Query Generation → Search Queries
14. Search Queries → Search and Content Retrieval → Raw Content
15. Raw Content → Content Processing → Learnings and Follow-up Questions
16. Learnings and Follow-up Questions → Recursive Exploration (if depth > 0) → Updated Learnings
17. All Learnings → Report Generation → Final Report

## Additional Considerations

- Implement error handling for network issues or API failures.
- Include a mechanism to respect rate limits of external services.
- Ensure the system can handle various types of content (text, HTML, etc.).
- Implement a caching system to avoid redundant searches and improve efficiency.
- Consider implementing a progress indicator to keep the user informed during long-running research tasks.

This specification provides a high-level overview of the Deep Research Assistant's functionality. The actual implementation may require additional helper functions and utilities depending on the chosen programming language and environment.

Citations: